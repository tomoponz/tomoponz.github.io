<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>tomoponzï½œãƒ‰ã‚¢</title>
  <meta name="description" content="æŠ¼ã™ã ã‘ã§ä¸–ç•Œã®ã©ã“ã‹ã¸ãƒ¯ãƒ¼ãƒ—ï¼ˆç„¡æ–™ï¼‰">

  <link rel="stylesheet" href="style.css?v=20260223-2">
  <script defer src="app.js"></script>

  <!-- é‡è¦ï¼šã“ã®é †ç•ªã§ -->
  <script defer src="places.js"></script>
  <script defer src="portal.js?v=20260222"></script>

  <style>
    /* ==============================
       Door page FX (more fancy ver.)
       portal.js ã¨ã¯ ID ã‚’åˆã‚ã›ã‚‹ã ã‘ã§å‹•ã
       ============================== */

    /* æš—è»¢ãƒ¬ã‚¤ãƒ¤ï¼ˆå°‘ã—é›°å›²æ°—ã‚’ä»˜ã‘ã‚‹ï¼‰ */
    #fade{
      position:fixed; inset:0;
      background:
        radial-gradient(1200px 700px at 50% 40%, rgba(120,190,255,.08), rgba(0,0,0,.92) 60%, #000 100%),
        linear-gradient(180deg, rgba(0,0,0,.78), #000);
      opacity:0;
      pointer-events:none;
      transition: opacity .45s ease;
      z-index:9999;
    }
    #fade::before{
      content:"";
      position:absolute; inset:0;
      background:
        linear-gradient(90deg, rgba(255,255,255,.03), transparent 40%, rgba(255,255,255,.02)),
        repeating-linear-gradient(0deg, rgba(255,255,255,.015) 0 1px, transparent 1px 3px);
      mix-blend-mode: overlay;
      opacity:.55;
    }
    .fadeIn{ opacity:1 !important; }

    .doorWrap{
      position:relative;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(900px 420px at 50% 0%, rgba(180,160,255,.10), transparent 60%),
        radial-gradient(700px 420px at 20% 30%, rgba(120,220,255,.08), transparent 65%),
        rgba(255,255,255,.03);
      box-shadow: 0 18px 60px rgba(0,0,0,.25);
      padding:18px;
      overflow:hidden;
      min-height: 300px;
      display:grid;
      place-items:center;
      isolation:isolate;
    }

    /* èƒŒæ™¯ã®ã‚†ã‚‰ãï¼ˆãƒ‰ã‚¢å‘¨ã‚Šã®éœ§ã£ã½ã•ï¼‰ */
    .doorWrap::before{
      content:"";
      position:absolute; inset:-40px;
      background:
        radial-gradient(220px 160px at 20% 20%, rgba(120,220,255,.12), transparent 60%),
        radial-gradient(240px 180px at 80% 30%, rgba(200,140,255,.12), transparent 62%),
        radial-gradient(260px 220px at 50% 85%, rgba(255,255,255,.06), transparent 65%);
      filter: blur(10px);
      opacity:.9;
      animation: mistFloat 6.5s ease-in-out infinite;
      z-index:0;
      pointer-events:none;
    }
    @keyframes mistFloat{
      0%,100%{ transform: translate3d(0,0,0) scale(1); }
      50%{ transform: translate3d(10px,-8px,0) scale(1.03); }
    }

    #fxCanvas{
      position:absolute; inset:0;
      width:100%; height:100%;
      pointer-events:none;
      z-index:3;
    }

    .doorBtn{
      width:min(520px, 100%);
      padding:18px 16px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.12);
      color: rgba(234,241,255,.92);
      cursor:pointer;
      transition:.18s ease;
      display:grid;
      gap:12px;
      text-align:center;
      user-select:none;
      z-index:2;
    }
    .doorBtn:hover{ background:rgba(255,255,255,.06); transform: translateY(-1px); }

    /* ===== ãƒ‰ã‚¢æœ¬ä½“ï¼ˆCSSã§æç”»ï¼‰ ===== */
    .doorStage{
      margin: 0 auto;
      width: 240px;
      height: 250px;
      position:relative;
      display:grid;
      place-items:center;
      perspective: 900px;
    }

    /* åºŠã®å½± */
    .doorStage::after{
      content:"";
      position:absolute;
      left: 50%; bottom: 6px;
      width: 210px; height: 28px;
      transform: translateX(-50%);
      background: radial-gradient(closest-side, rgba(0,0,0,.55), transparent 70%);
      filter: blur(4px);
      opacity:.55;
      z-index:1;
    }

    /* æ  */
    .doorFrame{
      position:relative;
      width: 190px;
      height: 240px;
      border-radius: 20px;
      padding: 12px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.03)),
        radial-gradient(280px 200px at 50% 10%, rgba(255,255,255,.08), transparent 55%);
      border: 1px solid rgba(255,255,255,.18);
      box-shadow:
        0 24px 80px rgba(0,0,0,.42),
        inset 0 0 0 1px rgba(0,0,0,.35);
      z-index:2;
    }
    .doorFrame::before{
      content:"";
      position:absolute; inset: 10px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.28);
      pointer-events:none;
    }

    /* ãƒ‰ã‚¢ã®å‘ã“ã†å´ï¼ˆãƒãƒ¼ã‚¿ãƒ«ï¼‰ */
    .portalBack{
      position:absolute;
      left: 12px; top: 12px;
      width: calc(100% - 24px);
      height: calc(100% - 24px);
      border-radius: 16px;
      background:
        radial-gradient(140px 160px at 50% 60%, rgba(160,230,255,.55), transparent 70%),
        radial-gradient(220px 180px at 45% 45%, rgba(190,150,255,.45), transparent 75%),
        radial-gradient(140px 120px at 65% 30%, rgba(255,255,255,.18), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.65), rgba(0,0,0,.90));
      filter: blur(0.2px);
      opacity: .55;
      transform: translateZ(-2px);
      overflow:hidden;
      pointer-events:none;
      z-index:2;
    }
    .portalBack::before{
      content:"";
      position:absolute; inset:-30px;
      background:
        conic-gradient(from 90deg, rgba(140,220,255,.0), rgba(140,220,255,.22), rgba(200,140,255,.18), rgba(255,255,255,.08), rgba(140,220,255,.0));
      filter: blur(14px);
      opacity: .85;
      animation: portalSpin 3.2s linear infinite;
    }
    @keyframes portalSpin{ to{ transform: rotate(360deg); } }

    /* ãƒ‰ã‚¢æ¿ï¼ˆæ‰‹å‰ï¼‰ */
    .doorLeaf{
      position:absolute;
      left: 12px; top: 12px;
      width: calc(100% - 24px);
      height: calc(100% - 24px);
      border-radius: 16px;
      transform-style: preserve-3d;
      transform: translateZ(2px);
      border: 1px solid rgba(255,255,255,.18);
      box-shadow:
        0 18px 60px rgba(0,0,0,.45),
        inset 0 0 0 1px rgba(0,0,0,.28);
      /* æœ¨ã£ã½ã„ãƒ†ã‚¯ã‚¹ãƒãƒ£ï¼ˆç”»åƒãªã—ã§ãã‚Œã£ã½ãï¼‰ */
      background:
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.10)),
        repeating-linear-gradient(90deg,
          rgba(140,110,70,.28) 0 6px,
          rgba(120,90,55,.24) 6px 10px,
          rgba(150,120,80,.20) 10px 14px),
        radial-gradient(260px 220px at 30% 10%, rgba(255,255,255,.12), transparent 60%);
    }

    /* åå°„ï¼ˆãƒ„ãƒ¤ï¼‰ */
    .doorLeaf::before{
      content:"";
      position:absolute; inset:0;
      border-radius: 16px;
      background:
        linear-gradient(70deg, transparent 0 35%, rgba(255,255,255,.10) 45%, transparent 60%);
      opacity: .65;
      mix-blend-mode: overlay;
      pointer-events:none;
    }

    /* ãƒ‘ãƒãƒ«ã®å‡¹å‡¸ */
    .doorLeaf::after{
      content:"";
      position:absolute;
      left: 14px; right: 14px; top: 14px; bottom: 14px;
      border-radius: 12px;
      background:
        linear-gradient(180deg, rgba(0,0,0,.18), transparent 35%, rgba(255,255,255,.06)),
        linear-gradient(90deg, rgba(0,0,0,.22), transparent 25%, rgba(255,255,255,.08));
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.06),
        inset 0 0 0 12px rgba(0,0,0,.12);
      pointer-events:none;
      opacity:.9;
    }

    .doorHinges{
      position:absolute;
      left: 7px; top: 34px;
      width: 10px; height: 160px;
      display:grid;
      align-content: space-between;
      z-index:4;
      pointer-events:none;
    }
    .doorHinges i{
      width: 10px; height: 16px;
      border-radius: 6px;
      background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(0,0,0,.25));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.25);
      opacity:.85;
    }

    .doorHandle{
      position:absolute;
      right: 18px; top: 112px;
      width: 28px; height: 28px;
      border-radius: 50%;
      background:
        radial-gradient(circle at 35% 35%, rgba(255,255,255,.65), rgba(255,225,140,.55) 35%, rgba(120,70,20,.45) 72%, rgba(0,0,0,.25));
      box-shadow:
        0 8px 18px rgba(0,0,0,.35),
        inset 0 0 0 3px rgba(255,230,160,.10);
      z-index:5;
    }
    .doorHandle::after{
      content:"";
      position:absolute;
      left: 50%; top: 50%;
      width: 10px; height: 10px;
      transform: translate(-50%,-50%);
      border-radius: 50%;
      background: rgba(0,0,0,.25);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.10);
      opacity:.9;
    }

    .doorKeyhole{
      position:absolute;
      right: 24px; top: 146px;
      width: 10px; height: 14px;
      border-radius: 6px 6px 10px 10px;
      background: rgba(0,0,0,.45);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
      z-index:5;
      opacity:.8;
    }
    .doorKeyhole::before{
      content:"";
      position:absolute;
      left: 50%; top: -6px;
      width: 10px; height: 10px;
      transform: translateX(-50%);
      border-radius: 50%;
      background: rgba(0,0,0,.45);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
    }

    /* ãƒ‰ã‚¢ã®éš™é–“ã‹ã‚‰ã®å…‰ï¼ˆé–‹ãã¨å¼·ããªã‚‹ï¼‰ */
    .lightLeak{
      position:absolute;
      left: 14px; top: 14px;
      width: 8px;
      height: calc(100% - 28px);
      border-radius: 10px;
      background: linear-gradient(180deg, rgba(160,230,255,.0), rgba(180,200,255,.45), rgba(180,200,255,.0));
      filter: blur(6px);
      opacity: 0;
      transform: translateX(4px);
      pointer-events:none;
      z-index:4;
    }

    .doorText{ font-weight:900; letter-spacing:.05em; }
    .doorHint{ font-size:13px; color: rgba(234,241,255,.76); }

    /* ===== é–‹ãæ¼”å‡ºï¼ˆportal.js ãŒ .opening ã‚’ä»˜ã‘ã‚‹ï¼‰ ===== */
    .opening .doorBtn{ transform: scale(0.985); filter: brightness(1.06); }

    /* å…ˆã«ã‚¬ã‚¿ã‚¬ã‚¿ â†’ ãã®å¾Œã«é–‹ã */
    .opening .doorLeaf{
      transform-origin: left center;
      animation:
        doorRattle .14s ease-in-out 0s 2,
        doorOpen .42s cubic-bezier(.18,.88,.22,1) .28s forwards;
    }
    .opening .doorHandle{
      animation: handleJiggle .18s ease-in-out 0s 2;
    }
    .opening .portalBack{
      animation: portalBloom .56s ease forwards;
    }
    .opening .lightLeak{
      opacity: 1;
      animation: leakGrow .56s ease forwards;
    }

    @keyframes doorRattle{
      0%{ transform: translateZ(2px) rotateY(0deg); }
      25%{ transform: translateZ(2px) rotateY(-1.2deg) translateX(-1px); }
      50%{ transform: translateZ(2px) rotateY(0.8deg) translateX(1px); }
      75%{ transform: translateZ(2px) rotateY(-0.8deg) translateX(-1px); }
      100%{ transform: translateZ(2px) rotateY(0deg); }
    }
    @keyframes handleJiggle{
      0%{ transform: translateZ(0) rotate(0deg); }
      35%{ transform: translateZ(0) rotate(8deg); }
      70%{ transform: translateZ(0) rotate(-6deg); }
      100%{ transform: translateZ(0) rotate(0deg); }
    }
    @keyframes doorOpen{
      0%{ transform: translateZ(2px) perspective(900px) rotateY(0deg); }
      100%{ transform: translateZ(2px) perspective(900px) rotateY(-74deg) translateX(-10px); }
    }
    @keyframes portalBloom{
      0%{ opacity:.55; filter: blur(.2px) saturate(1); }
      35%{ opacity:.75; filter: blur(.2px) saturate(1.2); }
      100%{ opacity:1; filter: blur(.1px) saturate(1.35); }
    }
    @keyframes leakGrow{
      0%{ transform: translateX(4px) scaleY(.85); filter: blur(7px); }
      100%{ transform: translateX(2px) scaleY(1.1); filter: blur(9px); }
    }

    /* ã‚¯ãƒªãƒƒã‚¯æ™‚ã«è»½ãâ€œä¸–ç•ŒãŒã‚ºãƒ¬ã‚‹â€ */
    .opening .doorFrame{
      animation: framePunch .56s ease forwards;
    }
    @keyframes framePunch{
      0%{ transform: translateZ(0); }
      18%{ transform: translateY(1px) scale(1.004); }
      45%{ transform: translateY(-1px) scale(1.01); }
      100%{ transform: translateY(0) scale(1); }
    }

    /* ã‚¹ãƒãƒ›ã§ãƒœã‚¿ãƒ³ãŒå¤§ãã™ãã‚‹æ™‚ã®èª¿æ•´ */
    @media (max-width: 420px){
      .doorStage{ width: 210px; height: 240px; }
      .doorFrame{ width: 170px; height: 220px; }
    }
  </style>
</head>

<body>
  <div id="fade" aria-hidden="true"></div>

  <!-- çµ±ä¸€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <header class="nav">
    <a class="brand" href="index.html" aria-label="tomoponz ãƒ›ãƒ¼ãƒ ">
      <span class="logo" aria-hidden="true"></span>
      <span class="brandText">
        <span class="brandName">tomoponz</span>
        <span class="brandSub" id="brandSub"></span>
      </span>
    </a>

    <nav class="navlinks" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
      <a class="chip" href="index.html">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</a>
      <a class="chip" href="omikuji.html">ãŠã¿ãã˜</a>
      <a class="chip" href="shindan.html">è¨ºæ–­</a>
      <a class="chip" href="gallery.html">ãƒã‚¿ç½®ãå ´</a>
      <a class="chip" href="links.html">ãƒªãƒ³ã‚¯</a>
      <a class="chip" href="games.html">ã‚²ãƒ¼ãƒ </a>
      <a class="chip" href="door.html">ãƒ‰ã‚¢</a>
      <a class="chip" href="hachi.html">å…«ç™¾ç§‘äº‹å…¸</a>
      <div class="nav-search">
        <input type="search" id="searchInput" placeholder="æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" autocomplete="off">
        <button id="searchBtn">æ¤œç´¢</button>
      </div>
    </nav>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1 class="h1">ãƒ‰ã‚¢</h1>
      <p class="sub">æŠ¼ã›ã°ãƒ¯ãƒ¼ãƒ—ã€‚ç„¡æ–™ã€‚éµãªã—ã€‚â€¦ãŸã¶ã‚“å®‰å…¨ã€‚</p>

      <div class="btnrow">
        <button onclick="toggleFxSound()">åŠ¹æœéŸ³ï¼š<b id="fxSoundState">ON</b></button>
        <button onclick="toggleFxParticles()">ç²’å­ï¼š<b id="fxParticlesState">ON</b></button>
        <a class="btn" href="warp.html">ãƒ¯ãƒ¼ãƒ—å…ˆï¼ˆç›´ï¼‰</a>
      </div>

      <div class="note" style="margin-top:12px">
        <span class="devOnly">åå¿œã—ãªã„æ™‚ã¯ã€ã¾ãš <b>places.js ãŒèª­ã‚ã¦ã‚‹ã‹</b>ï¼ˆPLACESãŒç©ºã˜ã‚ƒãªã„ã‹ï¼‰ã‚’ç–‘ãˆã€‚</span>
      </div>
    </section>

    <section class="grid2" style="margin-top:12px">
      <div class="card">
        <h2>ğŸšª Door</h2>

        <div class="doorWrap" id="doorWrap">
          <canvas id="fxCanvas"></canvas>

          <!-- portal.js ãŒã“ã®ãƒœã‚¿ãƒ³ã« click ã‚’ä»˜ã‘ã‚‹ -->
          <button class="doorBtn" id="doorBtn">
            <div class="doorStage" aria-hidden="true">
              <div class="doorFrame">
                <div class="portalBack"></div>
                <div class="lightLeak"></div>

                <div class="doorLeaf">
                  <div class="doorHinges">
                    <i></i><i></i><i></i>
                  </div>
                  <div class="doorHandle"></div>
                  <div class="doorKeyhole"></div>
                </div>
              </div>
            </div>

            <div class="doorText">ãƒ‰ã‚¢ã‚’é–‹ã</div>
            <div class="doorHint">ã‚¯ãƒªãƒƒã‚¯/ã‚¿ãƒƒãƒ— â†’ ã¡ã‚‡ã„æ¼”å‡º â†’ æš—è»¢ â†’ warp.html</div>
          </button>
        </div>

        <hr class="sep">
        <div class="note">ã‚¹ãƒãƒ›ã§ã‚‚OKã€‚åŠ¹æœéŸ³ã¯åˆå›ã‚¯ãƒªãƒƒã‚¯å¾Œã«é³´ã‚‹ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ä»•æ§˜ï¼‰ã€‚</div>
      </div>

      <div class="card">
        <h2>Warp Logï¼ˆæœ€è¿‘ï¼‰</h2>
        <ul class="list" id="warpLogShort"></ul>
        <div class="btnrow">
          <button onclick="clearWarpLog()">ãƒ­ã‚°æ¶ˆå»</button>
          <a class="btn" href="warp.html">ãƒ­ã‚°è©³ç´°ã¯ãƒ¯ãƒ¼ãƒ—å…ˆ</a>
        </div>
      </div>
    </section>

    <div class="footer">Â© tomoponz / Door</div>
  </main>
</body>
</html>
