<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Wake up.</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <div class="sky"></div>
  <div class="ground"></div>

  <img src="../img/cloud.png" class="weird-cloud" style="top: 10%; left: 10%; animation-duration: 40s;">
  <img src="../img/cloud.png" class="weird-cloud" style="top: 25%; left: 60%; animation-duration: 35s; transform: scale(1.5);">
  <img src="../img/rainbow.png" class="weird-rainbow" alt="Rainbow">

  <div class="crt-overlay"></div>
  <div class="noise"></div>

  <div class="center-message" id="main-text">Wake up.</div>

  <a href="../aero/index.html" class="escape-btn" id="escape-btn">I want to wake up.</a>

  <div id="text-container"></div>

  <div class="eye-container" style="top: 20%; left: 15%;">
    <div class="eye"><div class="pupil"></div></div>
  </div>
  <div class="eye-container" style="top: 15%; right: 20%; transform: scale(0.8);">
    <div class="eye"><div class="pupil"></div></div>
  </div>
  <div class="eye-container" style="top: 60%; left: 80%; transform: scale(1.5);">
    <div class="eye"><div class="pupil"></div></div>
  </div>
  <div class="eye-container" style="bottom: 25%; left: 25%; transform: scale(1.2);">
    <div class="eye"><div class="pupil"></div></div>
  </div>

  <div class="flash-bang" id="flash">WAKE UP!</div>

  <script>
    // 1. 目玉がマウスカーソルをギョロギョロ追従する処理
    document.addEventListener('mousemove', (e) => {
      const eyes = document.querySelectorAll('.eye');
      eyes.forEach(eye => {
        const rect = eye.getBoundingClientRect();
        const x = rect.left + rect.width / 2;
        const y = rect.top + rect.height / 2;
        const rad = Math.atan2(e.clientX - x, e.clientY - y);
        const rot = (rad * (180 / Math.PI) * -1) + 180;
        eye.style.transform = `rotate(${rot}deg)`;
      });
    });

    // 2. 画面のどこかをクリックした時の狂気ギミック
    const container = document.getElementById('text-container');
    const flash = document.getElementById('flash');
    const mainText = document.getElementById('main-text');
    const messages = ["Wake up.", "You are dreaming.", "This is not real.", "Open your eyes.", "Who are you?", "IT HURTS"];
    const colors = ['#ff0000', '#ffff00', '#00ff00', '#ff00ff', '#00ffff'];

    document.addEventListener('click', (e) => {
      // 脱出ボタンをクリックした場合はギミックを発動させない
      if(e.target.id === 'escape-btn') return;

      // 一瞬だけ画面を真っ赤に光らせる
      flash.style.opacity = 1;
      setTimeout(() => { flash.style.opacity = 0; }, 50);

      // クリックした場所にテキストを増殖させる
      const span = document.createElement('div');
      span.className = 'floating-text';
      span.innerText = messages[Math.floor(Math.random() * messages.length)];
      span.style.left = e.clientX + 'px';
      span.style.top = e.clientY + 'px';
      span.style.color = colors[Math.floor(Math.random() * colors.length)];
      span.style.transform = `translate(-50%, -50%) rotate(${Math.random() * 40 - 20}deg) scale(${Math.random() * 1.5 + 0.5})`;
      container.appendChild(span);

      // クリックするたびに中央の文字が震えて崩れていく
      mainText.style.letterSpacing = (Math.random() * 30) + 'px';
      mainText.style.transform = `translate(-50%, -50%) rotate(${Math.random() * 10 - 5}deg) scale(${Math.random() * 0.5 + 1})`;
    });

    // 3. 脱出ボタンが逃げるギミック（不安感を煽る）
    const escapeBtn = document.getElementById('escape-btn');
    escapeBtn.addEventListener('mouseover', () => {
      // 40%の確率でボタンが逃げる（絶対に押せないわけではない絶妙な確率）
      if (Math.random() > 0.6) {
        const x = Math.random() * 300 - 150;
        const y = Math.random() * 300 - 150;
        escapeBtn.style.transform = `translate(calc(-50% + ${x}px), ${y}px)`;
      }
    });
  </script>
</body>
</html>
