<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Where am I?</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="camera-drift">
    <div class="flicker-light"></div>
    <div class="vignette"></div>
    <div class="scanlines"></div>

    <div class="text-container">
      <p>誰もいない。</p>
      <p>ずっと前から、誰もいない。</p>
      <p class="small">足音が聞こえるのは、気のせいです。</p>
    </div>

    <a href="../index.html" class="exit-sign">EXIT ➔</a>

    <img id="daisy-btn" src="../img/daisy%20bell.png" alt="Daisy Bell Icon">
  </div>

  <audio id="audio-buzz" src="../assets/sfx/backrooms-buzzing-sound-effect.mp3" loop></audio>
  <audio id="audio-daisy" src="../assets/sfx/daisy-bell.mp3"></audio>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const buzz = document.getElementById("audio-buzz");
      const daisy = document.getElementById("audio-daisy");
      const daisyBtn = document.getElementById("daisy-btn");

      // 音量バランス調整
      buzz.volume = 0.25; 
      daisy.volume = 0.7;

      let hasInteracted = false;

      // ブラウザの自動再生制限対策：画面をクリックした瞬間に再生を開始
      const startAmbiance = () => {
        if (hasInteracted) return;
        hasInteracted = true;
        buzz.play().catch(console.error);
        daisy.play().catch(console.error);
      };

      document.body.addEventListener("click", startAmbiance, { once: true });
      document.body.addEventListener("touchstart", startAmbiance, { once: true });

      // 画像クリック時にDaisy Bellをリプレイ
      daisyBtn.addEventListener("click", (e) => {
        e.stopPropagation(); // ボディのクリックイベント発火を防止
        daisy.currentTime = 0;
        daisy.play();
        
        // クリック演出：一瞬だけ画像にノイズ
        daisyBtn.style.filter = "invert(1) blur(1px)";
        setTimeout(() => { 
          // ノイズが終わったら元の色味に戻す
          daisyBtn.style.filter = "sepia(0.7) contrast(1.3) brightness(0.7)"; 
        }, 100);
      });
    });
  </script>
</body>
</html>
