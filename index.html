<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>tomoponzï½œãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</title>
  <meta name="description" content="tomoponzã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸" />

  <link rel="stylesheet" href="style.css?v=20260220">

  <style>
    .quoteBox{
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      border-radius: 18px;
      padding: 16px;
    }
    .quoteText{ font-size: 18px; line-height: 1.7; margin: 0 0 8px; }
    .quoteBy{ opacity:.75; margin:0; }
    .btnrow{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    .btnlike{
      display:inline-flex; align-items:center; justify-content:center;
      padding:10px 14px; border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      text-decoration:none; color: inherit;
      cursor:pointer;
    }
    .grid3{ display:grid; gap:14px; grid-template-columns: repeat(3, minmax(0,1fr)); }
    @media (max-width: 900px){ .grid3{ grid-template-columns: 1fr; } }

    /* æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .search-container {
      margin: 0 auto 24px;
      max-width: 320px;
      display: flex;
      gap: 8px;
    }
    .search-input {
      flex: 1;
      padding: 10px 16px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.18);
      color: #fff;
      font-size: 14px;
    }
    .search-input:focus {
      outline: none;
      border-color: rgba(255,255,255,0.3);
    }
  </style>
</head>

<body>
  <header class="nav">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <b>tomoponz</b><br><small>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</small>
      </div>
    </div>

    <nav class="navlinks">
      <a class="chip" href="index.html">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</a>
      <a class="chip" href="omikuji.html">ãŠã¿ãã˜</a>
      <a class="chip" href="shindan.html">è¨ºæ–­</a>
      <a class="chip" href="gallery.html">ãƒã‚¿ç½®ãå ´</a>
      <a class="chip" href="links.html">ãƒªãƒ³ã‚¯</a>
      <a class="chip" href="games.html">ã‚²ãƒ¼ãƒ </a>
      <a class="chip" href="door.html">ãƒ‰ã‚¢</a>
      <a class="chip" href="hachi.html">å…«ç™¾ç§‘äº‹å…¸</a>
    </nav>
  </header>

  <main class="wrap">
    
    <button id="dangerBtn" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; background: rgba(255,0,0,0.1); border: 2px solid #ff4444; color: #ff8888; padding: 10px 16px; border-radius: 8px; font-size: 12px; font-weight: bold; cursor: pointer; box-shadow: 0 0 15px rgba(255,0,0,0.3); letter-spacing: 0.1em; transition: 0.2s; opacity: 0.6;">
      âš ï¸ æŠ¼ã™ãª
    </button>
    <div id="voidClick" style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; cursor: default; z-index: 9999;"></div>
    <div class="search-container">
      <input type="text" id="searchInput" class="search-input" placeholder="ã‚µã‚¤ãƒˆå†…æ¤œç´¢..." autocomplete="off">
      <button id="searchBtn" class="btnlike">æ¤œç´¢</button>
    </div>
    <section class="hero">
      <h1 class="h1" style="margin:0">tomoponz</h1>
      <p class="sub">ç§˜å¯†åŸºåœ° / ãƒã‚¿ç½®ãå ´ / ãƒŸãƒ‹ã‚²ãƒ¼ãƒ  / ã„ã‚ã„ã‚</p>

      <div class="btnrow">
        <a class="btnlike" href="games.html">ã‚²ãƒ¼ãƒ ã¸</a>
        <a class="btnlike" href="links.html">ãƒªãƒ³ã‚¯é›†ã¸</a>
        <a class="btnlike" href="kuro.html">é»’æ­´å²ï¼ˆæ³¨æ„ï¼‰</a>
      </div>
    </section>

    <section class="grid2">
      <div class="card">
        <h2>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
        <ul class="list">
          <li>åå‰ï¼štomoponz</li>
          <li>ã‚„ã£ã¦ã‚‹ã“ã¨ï¼šWeb / ãƒã‚¿ / ã¡ã‚‡ã„ã‚²ãƒ¼ãƒ </li>
          <li>ãƒ¡ãƒ¢ï¼šã“ã®ã‚µã‚¤ãƒˆã¯æ°—åˆ†ã§å¢—ãˆã¾ã™</li>
        </ul>
        <div class="note">â€»å¥½ãã«è¿½è¨˜ã—ã¦OK</div>
      </div>

      <div class="card">
        <h2>ä»Šæ—¥ã®ä¸€è¨€ï¼ˆåè¨€ï¼‰</h2>

        <div class="quoteBox">
          <p class="quoteText" id="quoteText">èª­ã¿è¾¼ã¿ä¸­â€¦</p>
          <p class="quoteBy" id="quoteBy"></p>

          <div class="btnrow">
            <button class="btnlike" type="button" id="nextQuoteBtn">æ¬¡ã®åè¨€</button>
            <button class="btnlike" type="button" id="copyQuoteBtn">ã‚³ãƒ”ãƒ¼</button>
          </div>
        </div>

        <div class="note">
          meigen ã® BASE_QUOTES + user_quotes.js ã‚’æ··ãœã‚‹
        </div>
      </div>
    </section>

    <section class="card">
      <h2>ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ</h2>
      <div class="grid3">
        <a class="btnlike" href="minigames.html">ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ä¸€è¦§</a>
        <a class="btnlike" href="gallery.html">ãƒã‚¿ç½®ãå ´</a>
        <a class="btnlike" href="door.html">ãƒ‰ã‚¢ï¼ˆãƒ¯ãƒ¼ãƒ—æ¼”å‡ºï¼‰</a>
      </div>
    </section>

    <div class="footer">
      Â© tomoponz | <span id="access-count">Access: ...</span>
    </div>
  </main>

  <script src="app.js?v=20260220"></script>

  <script src="quotes_base.js?v=20260220"></script>
  <script src="user_quotes.js?v=20260220"></script>

  <script>
    const BASE = Array.isArray(window.BASE_QUOTES) ? window.BASE_QUOTES : [];

    function normalizeUserQuote(q){
      if(!q || !q.text) return null;
      return {
        text: String(q.text),
        work: String(q.work || "User"),
        character: String(q.character || q.author || "tomoponz"),
        tags: Array.isArray(q.tags) ? q.tags : []
      };
    }

    const USER = Array.isArray(window.USER_QUOTES)
      ? window.USER_QUOTES.map(normalizeUserQuote).filter(Boolean)
      : [];

    const QUOTES = [...BASE, ...USER];

    function pickQuote() {
      if (QUOTES.length === 0) return { text:"(åè¨€ãƒ‡ãƒ¼ã‚¿ãŒç©º)", work:"", character:"" };
      return QUOTES[Math.floor(Math.random() * QUOTES.length)];
    }

    function showQuote(q) {
      const qt = document.getElementById("quoteText");
      const qb = document.getElementById("quoteBy");
      if (!qt || !qb) return;

      qt.textContent = "â€œ" + q.text + "â€";
      const meta = [];
      if (q.character) meta.push(q.character);
      if (q.work) meta.push(`ï¼ˆ${q.work}ï¼‰`);
      qb.textContent = meta.length ? "â€” " + meta.join("") : "";
    }

    function loadQuote(){ showQuote(pickQuote()); }

    async function copyCurrent(){
      const text = document.getElementById("quoteText")?.textContent || "";
      const by = document.getElementById("quoteBy")?.textContent || "";
      const payload = (text + "\n" + by).trim();
      try{
        await navigator.clipboard.writeText(payload);
        alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
      }catch{
        const ta = document.createElement("textarea");
        ta.value = payload;
        ta.style.position = "fixed";
        ta.style.left = "-9999px";
        document.body.appendChild(ta);
        ta.focus(); ta.select();
        try{ document.execCommand("copy"); alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ"); }catch{ alert("ã‚³ãƒ”ãƒ¼å¤±æ•—"); }
        document.body.removeChild(ta);
      }
    }

    // âœ… app.js ã‚ˆã‚Šå¾Œã«ã€æœ€å¾Œã«ç¢ºå®Ÿã«åæ˜ 
    window.addEventListener("load", () => {
      loadQuote();
      document.getElementById("nextQuoteBtn")?.addEventListener("click", loadQuote);
      document.getElementById("copyQuoteBtn")?.addEventListener("click", copyCurrent);
    });
  </script>

  <script>
    const WORKSPACE = "tomoponzs-workspace";
    const COUNTER = "first-counter";

    async function updateCounter() {
      try {
        const res = await fetch(`https://api.counterapi.dev/v1/${WORKSPACE}/${COUNTER}/up`);
        const data = await res.json();
        const count = parseInt(data.count, 10);

        const accessEl = document.getElementById("access-count");
        if (accessEl) accessEl.textContent = `Access: ${count}`;

        const luckyNumbers = [7, 10, 22, 50, 77, 100, 123, 777, 1000];
        if (luckyNumbers.includes(count)) triggerKiribanEvent(count);

      } catch (e) {
        console.log("ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ç§˜å¯†åŸºåœ°ã¯ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã®ã‚ˆã†ã§ã™ã€‚");
        const accessEl = document.getElementById("access-count");
        if (accessEl) accessEl.textContent = "Access: (offline)";
      }
    }

    function triggerKiribanEvent(num) {
      alert(
        `ã€ğŸŠ ç¥ãƒ»ã‚­ãƒªç•ªé”æˆ ğŸŠã€‘\n` +
        `ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã‚ãªãŸã¯ ${num} ç•ªç›®ã®è¨ªå•è€…ã§ã™ï¼\n` +
        `ã“ã®ç”»é¢ã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã—ã¦åº—ä¸»ã«å ±å‘Šã—ã¦ãã ã•ã„ã€‚`
      );
      document.body.style.transition = "all 2s ease";
      document.body.style.background = "linear-gradient(45deg, #ffd700, #ff8c00)";
      document.body.style.color = "#000";
      const bars = document.querySelectorAll(".bar i");
      bars.forEach(bar => {
        bar.style.background = "linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet)";
        bar.style.width = "100%";
      });
    }

    window.addEventListener("load", updateCounter);
  </script>

  <script>
    // 1. F12 ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ã®èªã‚Šã‹ã‘ï¼ˆãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ã®ãƒ’ãƒ³ãƒˆï¼‰
    console.log("%c[SYSTEM] ç«¯æœ«ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æ¤œçŸ¥ã€‚ç›£è¦–ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’é–‹å§‹ã—ã¾ã™ã€‚", "color: #888; font-size: 11px;");
    console.log("%c[WARNING] å½“ã‚µã‚¤ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’é–²è¦§ã—ã¦ã„ã‚‹æ–¹ã¸ã€‚ã“ã‚Œä»¥ä¸Šã®æ·±å…¥ã‚Šã¯æ¨å¥¨ã—ã¾ã›ã‚“ã€‚", "color: #ff0000; font-weight: bold; font-size: 14px;");
    console.log("%c æ©Ÿå¯†é ˜åŸŸã‚¢ã‚¯ã‚»ã‚¹ã‚³ãƒ¼ãƒ‰: 'kuro-n-tomo' ", "color: #000; background-color: #000; padding: 2px;");

    // 2. éš ã—ãƒ­ã‚°ã‚¤ãƒ³ã®å‡¦ç†ï¼ˆå·¦ä¸‹ã‚¯ãƒªãƒƒã‚¯ï¼‰
    const voidClick = document.getElementById("voidClick");
    if (voidClick) {
      voidClick.addEventListener("click", () => {
        const code = prompt("ã€ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€‘\nã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒå¿…è¦ã§ã™ã€‚ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        if (code === "kuro-n-tomo") {
          alert("èªè¨¼å®Œäº†ã€‚è£ä»˜ã‘ã•ã‚ŒãŸè¨˜éŒ²ã‚’é–‹ç¤ºã—ã¾ã™ã€‚");
          location.href = "deep.html"; 
        } else if (code) {
          alert("ã‚¨ãƒ©ãƒ¼ï¼šè¨˜éŒ²ã«ãªã„å€‹ä½“ã§ã™ã€‚ç›£è¦–ãƒ¬ãƒ™ãƒ«ã‚’å¼•ãä¸Šã’ã¾ã™ã€‚");
        }
      });
    }

    // 3. ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚µã‚¤ãƒˆå†…æ¤œç´¢
    const searchBtn = document.getElementById("searchBtn");
    const searchInput = document.getElementById("searchInput");

    // ã‚µã‚¤ãƒˆå†…ã®ç°¡æ˜“æ¡ˆå†…è¾æ›¸
    const siteIndex = [
      { keywords: ["ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«", "profile", "åå‰", "tomoponz", "è‡ªå·±ç´¹ä»‹"], url: "index.html" },
      { keywords: ["ãŠã¿ãã˜", "å ã„", "é‹å‹¢", "omikuji", "å¤§å‰", "å‡¶"], url: "omikuji.html" },
      { keywords: ["è¨ºæ–­", "shindan", "æ€§æ ¼", "ã‚¿ã‚¤ãƒ—"], url: "shindan.html" },
      { keywords: ["ãƒã‚¿", "ã‚®ãƒ£ãƒ©ãƒªãƒ¼", "gallery", "ãƒã‚¿ç½®ãå ´", "ç”»åƒ"], url: "gallery.html" },
      { keywords: ["ãƒªãƒ³ã‚¯", "links", "ãŠæ°—ã«å…¥ã‚Š", "ãŠã™ã™ã‚"], url: "links.html" },
      { keywords: ["ã‚²ãƒ¼ãƒ ", "games", "éŠã¶", "game"], url: "games.html" },
      { keywords: ["ãƒŸãƒ‹ã‚²ãƒ¼ãƒ ", "minigames", "æš‡ã¤ã¶ã—", "minigame"], url: "minigames.html" },
      { keywords: ["ãƒ‰ã‚¢", "door", "ãƒ¯ãƒ¼ãƒ—", "warp", "ç§»å‹•"], url: "door.html" },
      { keywords: ["å…«ç™¾ç§‘äº‹å…¸", "hachi", "äº‹å…¸", "è¾å…¸", "ç™¾ç§‘äº‹å…¸"], url: "hachi.html" },
      { keywords: ["åè¨€", "meigen", "è¿·è¨€", "ã‚»ãƒªãƒ•", "è¨€è‘‰"], url: "meigen.html" },
      { keywords: ["é»’æ­´å²", "kuro", "æ³¨æ„", "é–²è¦§æ³¨æ„"], url: "kuro.html" }
    ];

    if (searchBtn && searchInput) {
      const executeSearch = () => {
        const query = searchInput.value.trim();
        if (query === "") return;

        // ã€è£ã‚³ãƒ¼ãƒ‰ã€‘
        if (query === "kuro-n-tomo") {
          alert("èªè¨¼å®Œäº†ã€‚è£ä»˜ã‘ã•ã‚ŒãŸè¨˜éŒ²ã‚’é–‹ç¤ºã—ã¾ã™ã€‚");
          location.href = "deep.html"; 
          return;
        }

        // ã€ç°¡æ˜“ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã€‘
        const lowerQuery = query.toLowerCase();
        let foundUrl = null;
        for (const page of siteIndex) {
          if (page.keywords.some(kw => kw.includes(lowerQuery) || lowerQuery.includes(kw))) {
            foundUrl = page.url;
            break;
          }
        }

        if (foundUrl) {
          if (confirm(`ã€Œ${query}ã€ã«é–¢é€£ã™ã‚‹ãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚\nç§»å‹•ã—ã¾ã™ã‹ï¼Ÿ`)) {
            location.href = foundUrl;
          }
        } else {
          // ã€Googleã‚µã‚¤ãƒˆå†…æ¤œç´¢ã€‘
          if (confirm(`ã‚µã‚¤ãƒˆå†…ã®ä¸»è¦ãƒšãƒ¼ã‚¸ã«ã€Œ${query}ã€ã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚\nGoogleã‚’ä½¿ç”¨ã—ã¦ã‚µã‚¤ãƒˆå…¨ä½“ã‹ã‚‰æ¤œç´¢ã—ã¾ã™ã‹ï¼Ÿ`)) {
            let domain = window.location.hostname;
            if (domain === "localhost" || domain === "127.0.0.1" || domain === "") {
              domain = "tomoponz.github.io"; // æœ¬ç•ªãƒ‰ãƒ¡ã‚¤ãƒ³
            }
            const googleSearchUrl = `https://www.google.com/search?q=site:${domain}+${encodeURIComponent(query)}`;
            window.open(googleSearchUrl, "_blank");
          }
        }
      };

      searchBtn.addEventListener("click", executeSearch);
      searchInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") executeSearch();
      });
    }

    // 4. çµ¶å¯¾ã«æŠ¼ã—ã¦ã¯ã„ã‘ãªã„ãƒœã‚¿ãƒ³ã®å‡¦ç†
    const dangerBtn = document.getElementById("dangerBtn");
    if (dangerBtn) {
      dangerBtn.addEventListener("click", () => {
        if (!confirm("è­¦å‘Šï¼šçµ¶å¯¾ã«æŠ¼ã™ãªã¨è¨€ã„ã¾ã—ãŸã‚ˆã­ï¼Ÿæœ¬å½“ã«å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿ")) return;
        if (!confirm("å¾Œæ‚”ã—ã¾ã™ã‚ˆã€‚æœ¬å½“ã«ã„ã„ã‚“ã§ã™ã­ï¼Ÿ")) return;
        if (!confirm("æœ€çµ‚è­¦å‘Šã§ã™ã€‚ã“ã®å…ˆã€ä½•ãŒèµ·ãã¦ã‚‚ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚")) return;
        
        document.body.classList.add("glitch-mode");
        
        setTimeout(() => {
          alert("â€¦â€¦ãã†ã§ã™ã‹ã€‚");
          location.href = "horror.html"; 
        }, 1500);
      });
      
      dangerBtn.addEventListener("mouseenter", () => {
        dangerBtn.style.transform = "translate(2px, -2px)";
        setTimeout(() => dangerBtn.style.transform = "translate(-2px, 2px)", 50);
        setTimeout(() => dangerBtn.style.transform = "translate(0, 0)", 100);
      });
    }
  </script>
    
</body>
</html>
